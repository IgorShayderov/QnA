$('.answer-errors').html('<%= render 'shared/errors', resource: @answer %>');

<% if !@answer.errors.present? %>
  answerId = '<%= @answer.id %>';
  $answerNode = $(`[data-answer-id=${answerId}]`);

  $(`[data-answer-id=${answerId}] .answer-body`).text('<%= @answer.body %>');
  $(`[data-answer-id=${answerId}] .edit-answer-link`).show();
  $(`form#edit-answer-${answerId}`).addClass('hidden');

  <% if @answer.files.attached? %>
    $attachFileForm = $('#answer_files');
    $attachFileForm.replaceWith($attachFileForm.val('').clone(true));

    $filesBlock = $($answerNode).find('.answer-files');
    $($filesBlock).html('');

    <% @answer.files.each do |file| %>
      singleFileBlock = document.createElement('p');
      singleFileBlock.classList.add('answer-file');
      $(singleFileBlock).append('<%= link_to file.filename.to_s, url_for(file) %>');
      delete_file_link = '<%= link_to '(Delete)', delete_file_answer_path(id: @answer.id, file_id: file.id), method: :delete, data: {confirm: 'Are you sure?'}, class: 'ml-1' %>';
      $(singleFileBlock).append(delete_file_link);

      $($filesBlock).append(singleFileBlock);
    <% end %>
  <% end %>
<% end %>
